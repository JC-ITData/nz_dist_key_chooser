<!DOCTYPE html>
<html lang="en">
<head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Choosing a distribution key.</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link href="css_file.css" rel="stylesheet" type="text/css" media="all">
</head>
<body>
        <div id="contentLeftMajority">
                <div id="contentContextHelp" class="content content-leftside">
                        contentContextHelp
                </div>
                <div id="contentMain" class="content content-middle">
                    <p>contentMain</p>
                    <div id="bintree1"></div>
                </div>
                <div id="contentMiscInfo" class="content content-leftside">
                        contentMiscInfo
                </div>
                <div id="contentBelowMain" class="content content-middle">
                        contentBelowMain
                    <p id="text1" style="display:none">Slider is checked</p>
                </div>     
        </div>
        <div id="contentToggleButtons" class="content content-rightside">
            <p>Field exists in both sandbox table and table being joined to:</p><p><label class="switch">
                <input type="checkbox" id="slid_ExistsInBoth" onclick="BinOptionChanged('slid_ExistsInBoth')">
                <span class="slider round"></span>
            </label></p>
            <p>Field is a distribution key in the other table:</p><p><label class="switch">
                <input type="checkbox" id="slid_KeyInOtherTable" onclick="BinOptionChanged('slid_KeyInOtherTable')">
                <span class="slider round"></span>
            </label></p>
            <p>Field has high cardinality in sandbox table:</p><p><label class="switch">
                <input type="checkbox" id="slid_HighCardinality" onclick="BinOptionChanged('slid_HighCardinality')">
                <span class="slider round"></span>
            </label></p>
            <p>Field is used in joins:</p><p><label class="switch">
                <input type="checkbox" id="slid_InJoins" onclick="BinOptionChanged('slid_InJoins')">
                <span class="slider round"></span>
            </label></p>
            <p>The sandbox table may get to be over 100 thous records:</p><p><label class="switch">
                <input type="checkbox" id="slid_LargeTable" onclick="BinOptionChanged('slid_LargeTable')">
                <span class="slider round"></span>
            </label></p>
        </div>
<script>

    var divbintree1 = document.getElementById('bintree1');
    divbintree1.innerHTML = "";
    
    /////////////////////////////////////////////////////////////////
    // presentation
        function BinOptionChanged(elementName) {
            var slider1 = document.getElementById(elementName);
            var text = document.getElementById("text1");

            // If the slider is on, display output text
            if (slider1.checked == true){
                text.style.display = "block";
            } else {
                text.style.display = "none";
            }
        }

    /////////////////////////////////////////////////////////////////
    // Tree class definitions - tree/node
        class Node {
            constructor(textValueMessage, nodeID, textValueRank = null) {
                this.textValueMessage = textValueMessage;
                this.left = null;
                this.right = null;
                this.nodeId = nodeID;
                this.textValueRank = textValueRank;
            }
            toString() {
                return this.nodeId + "; " + this.textValueMessage;
            }
            isLeaf() {
                return ( ((this.left == null) && (this.right == null)) ? true : false)
            }
        }
        class Tree {
            constructor() {
                this.count = 0;
                this.root = null;
            }

            insert(textValueMessage, parentNode, position, textValueRank = null) {
                this.count++;
                let newNode = new Node(textValueMessage = textValueMessage, nodeID = this.count, textValueRank = textValueRank);
                this.root === null ? this.root = newNode : this.insertAt(textValueMessage = textValueMessage, parentNode = parentNode, position = position, newNode = newNode);
                return newNode;
            }

            insertAt(textValueMessage, parentNode, position, newNode) {

                if (position === "left") {
                    parentNode.left = newNode;
                } else if (position == "right") {
                    parentNode.right = newNode;
                }
            }
        }        

    /////////////////////////////////////////////////////////////////
    // class for data 
        class NodeData {
            constructor(key, positionFromParent, parentKey, textValueMessage, textValueRank = null) {
                this.key = key;
                this.positionFromParent = positionFromParent; // "left", "right", or null (for root)
                this.parentKey = parentKey;
                this.textValueMessage = textValueMessage;
                this.textValueRank = textValueRank;
            }
        }


    /////////////////////////////////////////////////////////////////
    // loading / rendering
        var arDataItems = [];
        
        arDataItems.push(new NodeData(key = 1, positionFromParent = null, parentKey = null, textValueMessage = "Does the field exist in both tables? (Table being created and table being joined to)", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 2, positionFromParent = "left", parentKey = 1, textValueMessage = "Does the table I am joining to use this field as the distribution key?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 3, positionFromParent = "right", parentKey = 1, textValueMessage = "Which table does the field exist in?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 4, positionFromParent = "left", parentKey = 2, textValueMessage = "Does this field have high cardinality (good distribution) in the sandbox table?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 5, positionFromParent = "right", parentKey = 2, textValueMessage = "Does this field have high cardinality (good distribution) in the sandbox table?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 6, positionFromParent = "left", parentKey = 3, textValueMessage = "Does this field have high cardinality (good distribution) in the sandbox table?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 7, positionFromParent = "right", parentKey = 3, textValueMessage = "Does the table I am joining to use this field as the distribution key?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 8, positionFromParent = "left", parentKey = 4, textValueMessage = "Is this field used in the join condition?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 9, positionFromParent = "right", parentKey = 4, textValueMessage = "Will this table get larger than 100 thous records?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 10, positionFromParent = "left", parentKey = 5, textValueMessage = "Is this field used in the join condition?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 11, positionFromParent = "right", parentKey = 5, textValueMessage = "DO NOT USE. Find another field for distribution.", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 12, positionFromParent = "left", parentKey = 6, textValueMessage = null, textValueRank = 6)); 
        arDataItems.push(new NodeData(key = 13, positionFromParent = "right", parentKey = 6, textValueMessage = "DO NOT USE. Find another field for distribution.", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 14, positionFromParent = "left", parentKey = 7, textValueMessage = "Would this field have high cardinality (good cardinality) if added to the sandbox table?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 15, positionFromParent = "right", parentKey = 7, textValueMessage = "DO NOT USE. Find another field for distribution.", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 16, positionFromParent = "left", parentKey = 8, textValueMessage = "This is the best option available!", textValueRank = 1)); 
        arDataItems.push(new NodeData(key = 17, positionFromParent = "right", parentKey = 8, textValueMessage = "INSTRUCTIONS: Add this field to your join condition in queries for faster performance", textValueRank = 2)); 
        arDataItems.push(new NodeData(key = 18, positionFromParent = "left", parentKey = 9, textValueMessage = "DO NOT USE. Find another field for distribution.", textValueRank = -)); 
        arDataItems.push(new NodeData(key = 19, positionFromParent = "right", parentKey = 9, textValueMessage = "INSTRUCTIONS: Add this field to your join condition in queries for faster performance", textValueRank = 3)); 
        arDataItems.push(new NodeData(key = 20, positionFromParent = "left", parentKey = 10, textValueMessage = "Note: Your queries will not be colocated", textValueRank = 5)); 
        arDataItems.push(new NodeData(key = 21, positionFromParent = "right", parentKey = 10, textValueMessage = "Note: Your queries will not be colocated", textValueRank = 6)); 
        arDataItems.push(new NodeData(key = 22, positionFromParent = "left", parentKey = 14, textValueMessage = "Note: Your queries will be well-distributed and co-located if you include the field in the join condition. INSTRUCTIONS: Add this field to your join condition in queries for faster performance", textValueRank = 2)); 
        arDataItems.push(new NodeData(key = 23, positionFromParent = "right", parentKey = 14, textValueMessage = "Will this table get larger than 100 thous records?", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 24, positionFromParent = "left", parentKey = 23, textValueMessage = "DO NOT USE. Find another field for distribution.", textValueRank = null)); 
        arDataItems.push(new NodeData(key = 25, positionFromParent = "right", parentKey = 23, textValueMessage = null, textValueRank = 4)); 

        var objtree1 = new Tree();


    
</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>